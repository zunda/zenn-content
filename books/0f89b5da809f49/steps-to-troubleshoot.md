---
title: "トラブルシューティングの手順"
---

筆者の勤務するPlatform as a Service (PaaS)プロバイダでは、多数の構成要素が、ユーザーからあるていど隠蔽された状態で稼動しています。ユーザーが実装したサーバプロセスを管理する構成要素があります。また、クライアントソフトウェアからサーバプロセスまでのHTTPSでのやりとりを可能にするため、[DNS](https://ja.wikipedia.org/wiki/Domain_Name_System)や[TLS](https://ja.wikipedia.org/wiki/Transport_Layer_Security)などを管理する構成要素もあります。また、サービスの提供するコンテナ内で稼動するユーザーのサーバプロセスから、データベースや外部のサービスまでの経路を管理する、構成要素もあります。ユーザーは、データベースやプロセスの定期的な実行のなどのため、アドオンとして、追加の構成要素を利用することもできます。

ユーザーとテクニカルサポートエンジニアとは、ユーザーが提出したサポートチケットを通じて、非同期にやりとりします。ユーザーは、プラットフォームが期待と異なる動作をしていると気づいた場合に、サポートチケットを提出してサポートを依頼します。テクニカルサポートエンジニアは、ユーザーから報告された問題を明確に把握し、プラットフォームのどの構成要素が原因なのか確認し、ユーザー・社内のエンジニアリングチーム・外部のサービスのいずれか、問題の原因となっている構成要素を実装・運用しているチームに、より詳細な調査や問題への対応を依頼します。

テクニカルサポートエンジニアは、まず、ユーザーから報告された問題がユーザーからどのように見えたのかはっきり把握できるだけの情報を集めます。

テクニカルサポートエンジニアは、つぎに、ユーザーから報告された問題について、どの構成要素がどのような動作をして問題の原因となっているのか仮説を設定し、報告された問題を矛盾なく再現できるか検証します。

仮説の設定や検証のために充分な情報が得られていない場合には、プラットフォームが蓄積しているメトリクスやログ、プログラムコードなどを、よりひろく確認してみます。ユーザーから追加の情報を求めることもあります。

テクニカルサポートエンジニアは、問題を矛盾なく再現できる仮説を検証できるまで、仮説の設定を繰り返します。仮説が検証できれば、それを原因としてユーザーに伝え、ユーザーや担当のエンジニアリングチームなど、原因となっている構成要素を修正できる立場の人に修正を依頼します。

## 仮説の発見
上記の手順で最も重要な仮説の発見をする過程は、現状では、インターネットの要素技術やプラットフォームの構成要素についてのおおまかな知識とある程度の期間のテクニカルサポートエンジニアとしての経験に裏打ちされた、職人芸です。エンジニアリングの発達した分野では、故障木解析などで問題の原因を推定できるかもしれませんが、筆者の勤務先では、構成要素が変化する頻度やユーザーが採用する技術との組み合わせの爆発などのため、故障木を確立することは現実的ではありません。
