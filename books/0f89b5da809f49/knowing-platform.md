---
title: "ユーザー以外から集める情報"
---

ユーザーから報告された問題についてある程度の情報が得られたら、テクニカルサポートエンジニアは、プラットフォームのどの構成要素、あるいはユーザーのアプリケーションや外部サービスが原因なのか仮説を設定して、報告された問題を再現可能か検証します。

仮説の設定や検証の段階では、ユーザーから得られた情報に加えて、他の情報源からも情報を集めます。自サービスが公開しているドキュメントや[RFC](https://ja.wikipedia.org/wiki/Request_for_Comments)などの標準を参照することで、ユーザーの報告した問題が期待されているものかどうかを確認することができるかもしれません。ユーザーからエラーメッセージが報告された場合には、そのエラーメッセージを[GitHub](https://github.com)などのコードレポジトリで検索することによって、ユーザーや自プラットフォームが利用しているライブラリが判明したり、エラーの記録される条件の詳細が得られるかもしれません。プラットフォームのコードからのエラーメッセージの場合には、非公開のコードの検索も必要です。

仮説の設定や検証の段階で、GitHubや検索サービスなどの第三者のサービスを利用する際には、ユーザー固有の情報を漏らしてしまわないように注意が必要です。例えば、自分の理解できない言語で質問やエラーメッセージが書かれている場合には、機械翻訳サービスを利用するのではなく、ユーザーに、英語などへの翻訳を依頼します。

充分な情報が得られて、ユーザーの報告した問題が、どの構成要素で起きているのかがわかり始めた場合には、その構成要素に期待される動作の詳細やどのような場合にエラーが報告されるのかなど、より詳細を調査することができるようになります。仮説検証の段階で得られた情報は、後日同様の問題が報告された場合に参照できるよう、サポートチケットなどにユーザーには非公開の情報として記しておきます。

ユーザーの報告した問題の原因が、自プラットフォームやユーザーの手の届かない範囲にある可能性にも留意が必要です。例えば、ユーザーの顧客のインターネットサービスプロバイダが原因となってユーザーのアプリケーションにアクセスできない場合です。

## 抽象度の調整
ユーザーから報告された問題の原因について仮説を設定する時には、プラットフォームや関連する要素を適切な抽象度で把握しなおす必要があります。例えば、ネットワーク経由でのユーザーのプロセスから外部のサービスへの通信が一部だけ失敗する場合には、コンテナやホストの問題・DNS・IPパケットのルーティング・TCP/IP接続のルーティング・外部サービス側の設定の問題など、様々な抽象度で問題の原因を仮定し、問題の状況を再現できる可能性があるか考えます。

適切な抽象度の設定には、報告された問題に共通な構成要素や共通ではない構成要素を見つけることも役立ちます。例えば、複数のコンテナが同時に問題を起こした場合には、原因はそれぞれのコンテナに属する構成要素ではなく、すべてのコンテナが依存する共通の構成要素にありそうです。例えば、問題の有無がコンテナや外部サービスのアベイラビリティゾーンに依存する場合には、ネットワークのルーティングのアベイラビリティゾーンに依存した部分が原因かもしれません。

## ドッグフーディング
日常的に自分でもプラットフォームを利用しておくと、ユーザーから報告された問題が平常時の動作とどう異なるのか、即座に判断できる場合があります。ユーザーの操作を再現するため、自分の操作がプラットフォームの構成要素間でどうやりとりされ記録されるか観察し、ユーザーの操作による記録と比較することもできます。

いっぽう、プラットフォームは複雑で、問題の起きていないものも含めた全ての構成要素について、理解しておくのは困難です。PaaSは原則的にユーザーのアプリケーションから見て透過になるように設計されているので、ユーザーのアプリケーションはプラットフォームを利用しない場合と同様に振る舞うものと信用しておき、問題が報告された場合に、関連する構成要素について、問題のあった時刻のメトリクスやログを参照しながら、プラットフォームのソースコードをより詳細に理解すると効率的です。
